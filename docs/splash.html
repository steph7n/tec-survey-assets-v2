<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tabgha Education Center School Survey</title>

  <link
    rel="stylesheet"
    href="https://steph7n.github.io/tec-survey-assets/src/style.css"
  />
</head>

<body data-base-url="<?= baseUrl ?>">
  <!-- Top Bar -->
  <header class="app-bar">
    <img
      id="app-logo"
      alt="School Logo"
      class="app-bar__logo"
      src="https://steph7n.github.io/tec-survey-assets/src/school-logo.png"
    />
    <div id="app-title" class="app-bar__title"></div>
  </header>

  <main class="page-container">
    <section class="page-content">
      <div class="card card--centered splash-card">
        <h1 class="splash-title">Welcome to Tabgha School Survey</h1>
        <p class="text-secondary splash-subtitle">
          Please choose how you would like to sign in.
        </p>

        <div class="splash-actions">
          <a id="parent-login"
             href="?page=loginParent"
             class="btn btn--primary btn--block splash-btn">
            Login as Parent
          </a>

          <a id="faculty-login"
             href="?page=loginFaculty"
             class="btn btn--outlined btn--block splash-btn">
            Login as Student / Faculty
          </a>
        </div>
      </div>
    </section>
  </main>

  <script>
    (function () {
        // Set dynamic top-bar title with current year
        const titleEl = document.getElementById("app-title");
        const currentYear = new Date().getFullYear();
        if (titleEl) {
        titleEl.textContent =
            "Tabgha Education Center School Survey " + currentYear;
        }

        const parentLink = document.getElementById("parent-login");
        const facultyLink = document.getElementById("faculty-login");

        // Read base URL injected by Apps Script (only set in real web app)
        const serverBaseUrl =
        (document.body && document.body.getAttribute("data-base-url")) || "";

        const hasRealBase =
        typeof serverBaseUrl === "string" &&
        serverBaseUrl.startsWith("http");

        if (hasRealBase) {
        // Running inside the Apps Script web app
        const baseUrl = serverBaseUrl.split("?")[0]; // strip any query params

        if (parentLink) {
            parentLink.href = baseUrl + "?page=loginParent";
        }
        if (facultyLink) {
            facultyLink.href = baseUrl + "?page=loginFaculty";
        }
        } else {
        // Local VS Code / static preview: point directly to the HTML files
        if (parentLink) {
            parentLink.href = "loginParent.html";
        }
        if (facultyLink) {
            facultyLink.href = "loginFaculty.html";
        }
        }
    })();
  </script>
</body>
</html>